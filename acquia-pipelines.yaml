version: 1.0.0

# cde-databases:
#  - db2
#  - db1

variables:
  global:
    PIPELINES_DEPLOY_DEBUG: TRUE
    var1:
      secure: 2acwFCRJ7ifPzuG3SQoQSEOQh24HhY0pnOCnMzONnHIUT/yvt+b+WGGEerhwNaxRJ9IBSkvcj+3JP9Sgbxbf6bnrh25jS330TAF9tQC930RPTByu5vjLRfIu4a9jQ89ehnv8J4FBYHxVP0EdBbKq4QlgjB9dhCp9q7f4JuahVbpuNZVQWHyNrrlulPUnVyLp/LC+bn6/QyZead/YO+2kQ5iKvJCTL9DLknzMQz3zckfmeEuvc5FH7oyrnQECY8Y+MMo0HWEsKMHkO9Awas/AH60+Pzndhwsw5h9DtL8od/BQzIBZjAl45VC0OB3PJLbBDAAcy2RYNkoLQZLQg/vqXLCcJjRpvlr+7wTiHziWne8zpFmDraI3+llKqizck5XErbuCp2S7+suiR6XuUGT+kq7Bogn+4j78eKR4txwALoUS/JQfeqwcd0b3Tpb9gWb0fHFHEvsEXRjd3DrGeZwvrNZ7+JWh0V/uUzq4TxC0ToX8d9rVDzEARtvaoVWOZXFkTKq1eXa2JsJsI81xlluTyhvQj2UfB0oyfFSzIJqOj6I83RXMg2QPU8m5jXNflCZ5EpJQ9On4SeKH3NdwmfCIYCJAXl6yz6bGO4/1Gwnw4oovndPdid+YUoTW9p7kZx8PAXJlADyS4xlR/wAgB/IRzRxTP2R5SQTuc7Yat3kRAYZViI=+oodoklsdAfzC+SnvQcMbPxyYV97EVpQk3efnfLl2nuNxwW9GWpFgJ8ldQ7nCYpHEEEXDKeWv7fkgHkNblBIfP7Fgea0w2bMzEZFWaUlLEo=
    var2:
      secure: 2acwVdO/u48VWf0c2gevKKn3a0Sc2Y70VCtfSqSCW0TV1KS3qn0HkMHY/XJrs/2dXQjMHPNfG3njzEmmvfKa3ODbK/7qcpkajvfEXsHTcrvurQO5LZSZipijj1IENB9syRytqx3bBb+67d+c4tX9SJL88uxb40sEGYxabgKC7PA2CkeVW9jZnW3FudwS2qsr+YdX7CEbXkYto7zIaThg5MQkp+UuJzaYMwsED/0zF9IgxUyWADcwBOJ+t2i8WkX/2m+oVYHNmysnlO9YTlnaTVl/IZKV/CkTfuKcX89NKD7KtgQ7YXeRj5sgRDZCWxeMCCZZ96UrriLeiiYGQc4aeHkySb18eHmEqgfkUBm0KbKvBRQaivtKsXFSphaAOVV5RJ1KI+ff76KhIMfWuSYmNQ6vfMZqwa482+qdD7OYrcQqqYiX6p5US3U9RtCFcxkOhWNyz0zGyd5rGe33A8vG1UtgcIAEGGJJjzxvdPwc+ZUQW9VqENEUsL2SEqvT43mawdU9DL0Xsx0GiZEYpJgWOGcd6BdI4zqmbJ0K6cJ6J95/Bvy+FjTcvc5Ku4Xb7cuEBY7TuJJPSwrNwdaJtFb9Vq5zHyAWEdYFRqZk5LKWmYSUMyEBxJ376dMdUJUh7gg7CzPdvlZl43U2bjh9GdxnGSrWmshEFPnObZRMnJcP6vw8a4=XtxpcsnsRnM9MIC/9GTruJka13ED6OAzz8hAg6SfNOQR9MWS3D2Tjx5YRKLZ+FXTCRs0WS5PL5ZdIffr0tLD8xg3sHWIACH0asTMABunoIgKkKYi8mHKu7veVPoVWi+uvWvKEo6w5I/r/+nFMfBSeA==
# ssh-keys:
#   write-key:
#     secure: 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

events:
  build:
    steps:
      # If you have build instructions, put them here. They are not required.
      - build_site:
          script:
            - echo $var1
            - echo $var2
            - touch docroot/index.html
            - echo "Hello World!"
            - echo "You successfully deployed your build to an ODE SYNCDB master take a bow!!!" > docroot/index.html

  post-deploy:
    steps:
      # Deploy the build artifact to a Cloud on-demand environment.
      - deploy:
          script:
            - date +"%T"
            # - pipelines-deploy
            # - pipelines-sync-dbs db3 db4 || echo "Fails to sync dbs other than ${CDE_DATABASES}"
            - pipelines-sync-dbs db3 db4 || echo "Fails is there are dbs specified in yaml"
            - date +"%T"

  # When a GitHub pull request is merged, this deletes the coresponding ODE.
  pr-merged:
    steps:
      - deploy:
          script:
            - echo "Pull request merged"
            - pipelines-deploy

  # When a GitHub pull request is closed, this deletes the coresponding ODE.
  pr-closed:
    steps:
      - deploy:
          script:
            - echo "Pull request closed"
            - pipelines-deploy
